define(["angular","jquery","gumga-class","mousetrap","angular-ui-router"],function(e,t,n,r){function i(e,t){this._extractStateShortcuts(e,t)}return r.stopCallback=function(e,t,n,r){return e.ctrlKey||e.altKey?!1:(" "+t.className+" ").indexOf(" mousetrap ")>-1?!1:t.tagName=="INPUT"?["checkbox","radio","button","submit","reset"].indexOf(t.type.toLowerCase())<0:t.tagName=="TEXTAREA"||t.contentEditable&&t.contentEditable=="true"},n.create({$inject:["$rootScope","$state"],constructor:i,prototype:{_keys:{},_extractStateShortcuts:function(e,t){var n=t.get();for(var r=0;r<n.length;r++){var i=n[r];i.hasOwnProperty("shortcut")&&this.bindFunction(e,i.shortcut,this._stateFunction(e,t,i.name))}},_stateFunction:function(e,t,n){return function(){t.go(n),e.$apply()}},bindFunction:function(e,t,n,i){return this._keys[t]=!0,r.bind(t,n,i),e.$on("$destroy",this._unbindKey(t)),this},_unbindKey:function(e){var t=this;return function(){r.unbind(e),delete t._keys[e]}}}}),e.module("gumga.services.keys",["ui.router"]).service("GumgaKeys",i)});