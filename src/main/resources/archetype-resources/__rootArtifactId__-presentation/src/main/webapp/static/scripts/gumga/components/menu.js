define(["angular","jquery"],function(e,t){return e.module("gumga.components.menu",[]).directive("gumgaMenu",function(){return{restrict:"E",transclude:!0,template:'<div class="gumga-menu" ng-transclude></div>',replace:!0,scope:{open:"=?"},link:function(e,n,r){function i(e,r){var i=t(e),s=i.parent();if(!s.hasClass("submenu"))return;var o=s.parentsUntil(n,".submenu");o.addClass("open");var u=n.find(".submenu").not(o).not(s);u.removeClass("open"),s.toggleClass("open"),n.find(".submenu.open > ul").slideDown(r),n.find(".submenu:not(.open) > ul").slideUp(r)}n.find(".submenu > ul").css("display","none"),e.$watch("open",function(e){if(!e)return;var t=n.find("li.submenu a[gumga-menu-id="+e+"]"),r=t.closest(".submenu"),s=r.find("> a");i(s,0)}),n.find(".submenu > a").click(function(e){return i(e.target,"fast"),!1})}}})});